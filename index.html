<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>Planet Simulator</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="planetCanvas" width="1200" height="700"></canvas>
    <button id="pauseButton">暂停</button>
    <button id="playButton" style="display: none;">播放</button>
    <script>
        function resizeCanvas() {
            const canvas = document.getElementById('planetCanvas');
            canvas.width = window.innerWidth - 20;
            canvas.height = window.innerHeight - 100;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
    </script>
    <script>
        // -------------------------------------
        // Resizing the canvas to fit the window
        // -------------------------------------
        function resizeCanvas() {
            const canvas = document.getElementById('planetCanvas');
            canvas.width = window.innerWidth - 20;
            canvas.height = window.innerHeight - 100;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // -----------------------------------------------
        // JavaScript code to handle the planet simulation
        // -----------------------------------------------
        const colors = ["red", "blue", "orange", "gold", "green", "grey", "purple", "pink", "cyan"];
        const canvas = document.getElementById('planetCanvas');
        const ctx = canvas.getContext('2d');

        fetch('o9')
            .then(response => response.text())
            .then(data => {
                const lines = data.split('\n');
                const numObjects = parseInt(lines[0]);

                let lineIndex = 1;
                const time = parseInt(lines[lineIndex++]);
                let currentTime = 0;

                let intervalId;
                let isPaused = false;

                function draw() {
                    if (isPaused) return;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let t = 0; t < numObjects; t++) {
                        const x = parseFloat(lines[lineIndex++]);
                        const y = parseFloat(lines[lineIndex++]);
                        ctx.beginPath();
                        ctx.arc(x + canvas.width / 2, y + canvas.height / 2, 5, 0, 2 * Math.PI);
                        ctx.fillStyle = colors[t % colors.length];
                        ctx.fill();
                    }
                    currentTime++;
                    if (currentTime >= time) {
                        currentTime = 0;
                        lineIndex = 2;
                    }
                }

                intervalId = setInterval(draw, 1000 / 60);

                document.getElementById('pauseButton').addEventListener('click', () => {
                    isPaused = true;
                    document.getElementById('pauseButton').style.display = 'none';
                    document.getElementById('playButton').style.display = 'inline';
                });

                document.getElementById('playButton').addEventListener('click', () => {
                    isPaused = false;
                    document.getElementById('playButton').style.display = 'none';
                    document.getElementById('pauseButton').style.display = 'inline';
                });
            });
    </script>
</body>
</html>
